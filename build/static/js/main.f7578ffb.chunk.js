(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(15),r=t.n(c),s=t(6),a=t(3),o=t(2),u=t(4),i=t.n(u),l="/api/persons",j=function(){return i.a.get(l)},d=function(e){return i.a.post(l,e)},b=function(e,n){return i.a.put("".concat(l,"/").concat(e),n)},f=function(e){return i.a.delete("".concat(l,"/").concat(e))},m=(t(38),t(0)),h=function(e){var n=e.message,t=e.classType;return null===n?null:Object(m.jsx)("div",{className:t,children:n})},O=function(e){var n=e.person;return n.name+" "+n.number},p=function(e){var n=e.filter,t=e.handleFilterChange;return Object(m.jsx)("div",{children:Object(m.jsx)("form",{children:Object(m.jsxs)("p",{children:[" filter shown with",Object(m.jsx)("input",{value:n,onChange:t})]})})})},v=function(e){var n=e.handleClick,t=e.text;return Object(m.jsx)("button",{onClick:n,children:t})},x=function(e){var n=e.persons,t=e.filter,c=e.setPersons,r=e.setErrorMessage,s=e.setSuccessMessage;return Object(m.jsx)("ul",{children:void 0===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(m.jsxs)("li",{children:[Object(m.jsx)(O,{person:e}),Object(m.jsx)(v,{text:"delete",handleClick:function(){return function(e){var n=e.person,t=e.setPersons,c=e.persons,r=e.setErrorMessage,s=e.setSuccessMessage;if(window.confirm("Do you really want to delete ".concat(n.name,"?")))return f(n.id).then((function(e){t(c.filter((function(e){return e.id!==n.id}))),s("Person ".concat(n.name," removed succesfully")),setTimeout((function(){s(null)}),3e3)})).catch((function(e){r("Note '".concat(n.name,"' was already removed from server")),setTimeout((function(){r(null)}),5e3)}))}({person:e,setPersons:c,persons:n,setErrorMessage:r,setSuccessMessage:s})}})]},e.name)}))})},g=function(e){var n=e.onSubmit,t=e.handleNameChange,c=e.handleNumberChange,r=e.name,s=e.number;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:r,onChange:t})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:s,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},w=function(){var e=Object(o.useState)([{name:"Arto Hellas",number:"045135133"}]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(o.useState)(""),u=Object(a.a)(r,2),i=u[0],l=u[1],f=Object(o.useState)(""),O=Object(a.a)(f,2),v=O[0],w=O[1],C=Object(o.useState)(""),S=Object(a.a)(C,2),y=S[0],P=S[1],M=Object(o.useState)(null),T=Object(a.a)(M,2),k=T[0],N=T[1],E=Object(o.useState)(null),D=Object(a.a)(E,2),F=D[0],J=D[1];Object(o.useEffect)((function(){j().then((function(e){c(e.data)}))}),[]);return Object(m.jsxs)("div",{children:[Object(m.jsx)(h,{message:k,classType:"error"}),Object(m.jsx)(h,{message:F,classType:"success"}),Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(p,{filter:y,handleFilterChange:function(e){P(e.target.value)}}),Object(m.jsx)("h2",{children:"add a new "}),Object(m.jsx)(g,{onSubmit:function(e){e.preventDefault();var n={name:i,number:v};if(t.map((function(e){return e.name})).includes(i)){if(window.confirm("".concat(i," is already added to the phonebook. Replace the old number with new one?"))){var r=t.find((function(e){return e.name===i})),a=Object(s.a)(Object(s.a)({},r),{},{number:n.number});b(r.id,a).then((function(e){c(t.map((function(n){return n.name!==i?n:e.data}))),l(""),w(""),J("Person ".concat(n.name," updated!")),setTimeout((function(){J(null)}),3e3)})).catch((function(e){N("Person '".concat(n.name,"' has already been removed from server")),setTimeout((function(){N(null)}),5e3)}))}}else d(n).then((function(e){c(t.concat(e.data)),l(""),w("")})),J("Person ".concat(n.name," added!")),setTimeout((function(){J(null)}),3e3)},handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){w(e.target.value)},name:i,number:v}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(x,{persons:t,filter:y,setPersons:c,setErrorMessage:N,setSuccessMessage:J})]})};r.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.f7578ffb.chunk.js.map